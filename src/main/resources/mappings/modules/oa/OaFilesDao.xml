<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gov.kl.chengguan.modules.oa.dao.OaFilesDao">
	
    <sql id="columns">
		id,
		group_id AS "groupId",
		file_name AS "fileName",
		file_path AS "filePath",
		type
		
	</sql>
    
    <select id="get" resultType="OaFiles">
		SELECT 
			<include refid="columns"/>
		FROM oa_files
		WHERE id = #{id}
	</select>

	<select id="findAllList" resultType="OaFiles">
		SELECT 
			<include refid="columns"/>
		FROM oa_files
		WHERE del_flag = #{DEL_FLAG_NORMAL} 
		<if test="groupId != null">
			AND group_id= #{groupId}
		</if>
		ORDER BY id DESC
	</select>
		
	<insert id="insert">
		INSERT INTO oa_files(
			id, 
			group_id,
			file_name,
			file_path,
			type,
			create_by,
			create_date,
			del_flag
						
		) VALUES (
			#{id}, 
			#{groupId},
			#{fileName},
			#{filePath},
			#{type},
			#{createBy.id},
			#{createDate},
			#{delFlag}
		)
	</insert>
	
	<update id="update">
		UPDATE oa_files SET 
			group_id = #{groupId}, 
			file_name = #{fileName}, 
			file_path = #{filePath}, 
			type = #{type},
			create_by = #{createBy.id},
			create_date = #{createDate},
			del_flag = #{delFlag}
		WHERE id = #{id}
	</update>
	
	
	<update id="delete">
		UPDATE oa_files SET 
			del_flag = #{DEL_FLAG_DELETE}
		WHERE id = #{id}
	</update>

</mapper>